ASxxxx Assembler V02.00 + NoICE + SDCC mods  (Zilog Z80 / Hitachi HD64180), page 1.
Hexadecimal [16-Bits]



                              1 ;;
                              2 ;;  ENTITY MANAGER
                              3 ;;
                              4 
                     0007     5 entity_size == 7
                     0003     6 max_entities == 3
                              7 
   0000 00                    8 _num_entities::  .db 0
   0001 03 00                 9 _last_elem_ptr::  .dw _entity_array 
   0003                      10 _entity_array:: 
   0003                      11     .ds entity_size*max_entities
                             12 
                             13 ;;INPUT
                             14 ;;      HL: Pointer to entity intializer
   0018                      15 entityman_create::
   0018 ED 5B 01 00   [20]   16     ld  de, (_last_elem_ptr)
   001C 01 07 00      [10]   17     ld  bc, #entity_size
   001F ED B0         [21]   18     ldir
                             19 
   0021 3A 00 00      [13]   20     ld  a, (_num_entities)
   0024 3C            [ 4]   21     inc a
   0025 32 00 00      [13]   22     ld (_num_entities), a
                             23 
   0028 2A 01 00      [16]   24     ld hl, (_last_elem_ptr)
   002B 01 07 00      [10]   25     ld bc, #entity_size
   002E 09            [11]   26     add hl, bc
   002F 22 01 00      [16]   27     ld (_last_elem_ptr), hl
   0032 C9            [10]   28 ret
                             29 ;;Getters
   0033                      30 entityman_getEntityArray_IX::
   0033 DD 21 03 00   [14]   31     ld ix, #_entity_array
   0037 C9            [10]   32 ret
                             33 
   0038                      34 entityman_getNumEntities_A::
   0038 3A 00 00      [13]   35     ld a, (_num_entities)
   003B C9            [10]   36 ret
